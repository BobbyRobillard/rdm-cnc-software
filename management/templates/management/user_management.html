{% extends 'website/base.html' %}

{% block custom_css %}
<style type="text/css">
body {
  background-color: #f5f6f7;
}

h2 {
  text-align: center;
}

.heading {
  background-color: #08f;
  color: white;
  text-align: center;
  font-weight: bold;
  font-size: 25px;
}

.right {
  text-align: right;
  float: right;
}

select {
  width: 100%;
  margin-bottom: 25px;
}

td, tr {
  background-color: white;
}

table {
  -webkit-box-shadow: 0px 2px 10px 2px rgba(143,143,143,1);
  -moz-box-shadow: 0px 2px 10px 2px rgba(143,143,143,1);
  box-shadow: 0px 2px 10px 2px rgba(143,143,143,1);
}

.col-lg-6 {
  margin-top: 10%;
}

.fa-plus {
  color: green
}
.fa-trash {
  color:red
}
</style>
{% endblock custom_css %}

{% block content %}
{% include 'website/server_messages.html' %}
<div class="container">
  <div class="row">
      <div class="col-lg-6">
        <h2>User Management <i class="fa fa-plus" href="{% url 'management:add_user' %}"></i></h2>
        <form method="POST" action="{% url 'management:user_management' %}">{% csrf_token %}
          <table id="user-table" class="table">
              <tbody>
                {{ RoleFormSet.management_form }}
                {% for role in RoleFormSet %}
                <tr id="row-{{role.user.value}}">
                  <td style="text-align:left">
                      {{ role.user.initial }}
                      {{ role.user.as_hidden }}
                    </td>
                  <td class="center">
                      {{ role.role }}
                    </td>
                    <td>
                      <i id="{{ role.user.value }}" href="{% url 'management:delete_user' role.user.value %}" class="fas fa-trash-alt"></i>
                      </td>
                  </tr>
                  {% endfor %}
              </tbody>
            </table>
            <div class="row">
              <div class="col text-center">
            <button  type="submit" class="btn btn-primary">Update User(s) Status</button>
            </div>
            </div>
            </form>
      </div>
  </div>
</div>
{% endblock content %}
{% block js %}
  <script>
    $('.fa-plus').click(function() {
  window.location.href = $(this).attr('href');
});

    $(".fa-trash-alt").click(function() {
      var id = $(this).attr('id');
      console.log("clicked: " + $(this).attr('id') + "\n");
      $('#user-table #row-' + id).remove();
      $.get($(this).attr('href'), {}, function() {});
    });
  </script>
{% endblock js%}
